<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Installing PHP’s OCI8 Extension on Ubuntu</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Installing PHP’s OCI8 Extension on Ubuntu</h1>
</header>
<section data-field="body" class="e-content">
<section name="9099" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="d0c9" id="d0c9" class="graf graf--h3 graf--leading graf--title">Installing PHP’s OCI8 Extension on Ubuntu</h3><p name="d6f1" id="d6f1" class="graf graf--p graf-after--h3">OCI8 is PHP’s library for talking to Oracle databases, but installing it on Ubuntu is not particularly simple. Here’s what I did, on Ubuntu 12.04. My instructions are based on <a href="http://naveensnayak.wordpress.com/2012/09/17/connection-from-php-to-oracle-database-using-oci8-on-ubuntu-with-oracle-instant-client-and-sdk/" data-href="http://naveensnayak.wordpress.com/2012/09/17/connection-from-php-to-oracle-database-using-oci8-on-ubuntu-with-oracle-instant-client-and-sdk/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">these</a> by Naveen S Nayak, plus some bits I had to figure out.</p><p name="5377" id="5377" class="graf graf--p graf-after--p">Firstly, you’ll need a working Apache / PHP stack to add your Oracle stuff to. Once you’ve got that going, you need to download two ZIP files from Oracle, the <em class="markup--em markup--p-em">Instant Client Package — Basic</em> and the <em class="markup--em markup--p-em">Instant Client Package — SDK</em>. Download them here (<a href="http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html" data-href="http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html</a>) for 64 bit Ubuntu, 32 bit is at <a href="http://www.oracle.com/technetwork/topics/linuxsoft-082809.html" data-href="http://www.oracle.com/technetwork/topics/linuxsoft-082809.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">http://www.oracle.com/technetwork/topics/linuxsoft-082809.html</a>.</p><p name="40dc" id="40dc" class="graf graf--p graf-after--p">Unzip the files in the basic package to <strong class="markup--strong markup--p-strong">/opt/oracle_instantclient</strong>. Next, unzip the SDK package and copy the <strong class="markup--strong markup--p-strong">sdk</strong> directory inside that to <strong class="markup--strong markup--p-strong">/opt/oracle_instantclient</strong>, so that it lives at <strong class="markup--strong markup--p-strong">/opt/oracle_instantclient/sdk</strong>.</p><p name="61f4" id="61f4" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Note: </em></strong><em class="markup--em markup--p-em">Both the ZIP archives I downloaded contained a directory at their root called “instantclient_12_1”, with no other duplicate files. You could therefore just unzip both archives to the same location, then move the resulting directory to /opt and rename it “oracle_instantclient”.</em></p><p name="629e" id="629e" class="graf graf--p graf-after--p">Next we need to create a symlink –</p><pre name="4e02" id="4e02" class="graf graf--pre graf-after--p">cd /opt/oracle_instantclient sudo ln -s libclntsh.so.12.1 libclntsh.so</pre><p name="327b" id="327b" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Note: </em></strong><em class="markup--em markup--p-em">Check the file you’re linking to above exists — the version number might be different for you.</em></p><p name="0034" id="0034" class="graf graf--p graf-after--p">Now we need to install some packages to allow us to build the PHP extension.</p><pre name="7ae4" id="7ae4" class="graf graf--pre graf-after--p">sudo apt-get install php5-dev libaio-dev php-pear sudo pecl install oci8</pre><p name="f49b" id="f49b" class="graf graf--p graf-after--pre">The pecl install will ask you to tell it Oracle’s home directory, the answer you need to give is</p><pre name="8a11" id="8a11" class="graf graf--pre graf-after--p">instantclient,/opt/oracle_instantclient</pre><p name="ab90" id="ab90" class="graf graf--p graf-after--pre">You should then see a congratulatory message along the lines of “Build Process completed successfully”.</p><p name="54f5" id="54f5" class="graf graf--p graf-after--p">Now we need to tell PHP about our new extension, like this</p><pre name="268d" id="268d" class="graf graf--pre graf-after--p">sudo echo “extension=oci8.so” &gt; /etc/php5/conf.d/oci8.ini</pre><p name="e4ca" id="e4ca" class="graf graf--p graf-after--pre">Now we need to make sure that PHP apps know where to look for the extension, by adding an Apache environment variable (annoyingly, adding this as a system-wide environment variable didn’t work for me). You can add this to any of Apache’s various conf files, or to your virtualhost config, if that suits.</p><p name="2423" id="2423" class="graf graf--p graf-after--p">I added the following to /etc/apache2/apache2.conf</p><pre name="cd46" id="cd46" class="graf graf--pre graf-after--p">SetEnv LD_LIBRARY_PATH=”/opt/oracle_instantclient”</pre><p name="24cc" id="24cc" class="graf graf--p graf-after--pre">Then I needed to set the permissions on that directory to allow Apache to access it.</p><pre name="1096" id="1096" class="graf graf--pre graf-after--p">sudo chown -R root:root oracle_instantclient/ sudo chmod -R g+x oracle_instantclient/</pre><p name="d742" id="d742" class="graf graf--p graf-after--pre">And finally, restart Apache –</p><pre name="7590" id="7590" class="graf graf--pre graf-after--p">sudo service apache2 restart</pre><p name="c649" id="c649" class="graf graf--p graf-after--pre graf--trailing">Congratulations! You should now be able to use PHP’s oci_* functions.</p></div></div></section><section name="bec9" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="9808" id="9808" class="graf graf--p graf--leading graf--trailing"><em class="markup--em markup--p-em">Originally published at </em><a href="https://jezhalford.com/2014/09/24/installing-phps-oci8-extension-on-ubuntu/" data-href="https://jezhalford.com/2014/09/24/installing-phps-oci8-extension-on-ubuntu/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><em class="markup--em markup--p-em">jezhalford.com</em></a><em class="markup--em markup--p-em"> on September 24, 2014.</em></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@jezhalford" class="p-author h-card">Jez Halford</a> on <a href="https://medium.com/p/57cd547812b"><time class="dt-published" datetime="2014-09-24T18:52:00.000Z">September 24, 2014</time></a>.</p><p><a href="https://medium.com/@jezhalford/installing-phps-oci8-extension-on-ubuntu-57cd547812b" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on March 18, 2019.</p></footer></article></body></html>